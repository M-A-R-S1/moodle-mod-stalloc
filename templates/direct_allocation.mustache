{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template mod_stalloc/direct_allocation

    Display the home site of this plugin.
    Classes required for JS:
    * none
    Data attributes required for JS:
    * none
    Context variables required for this template:
    * none
}}

{{#save_ratings}}
    <div class="alert alert-success mb-5" role="alert">
        Successfully saved!
    </div>
{{/save_ratings}}

{{#error_save_ratings}}
    <div class="alert alert-danger mb-5" role="alert">
        Error! Ratings not saved! Please make sure to select different chairs for all priorities!
    </div>
{{/error_save_ratings}}

{{#error_update_ratings}}
    <div class="alert alert-danger mb-5" role="alert">
        Error! Ratings not updated! Please make sure to select different chairs for all priorities!
    </div>
{{/error_update_ratings}}



{{#ratings_present}}
    <div id="accordion" class="col-lg-6 col-sm-12">
        <div class="jumbotron mt-5">
            <h2>Thank you for your submission.</h2>
            <p>We have received and saved your chair selections.<br>
                You can adjust your selection until the <b>{{phase1_end}}</b> down below.
            </p>
        </div>
    </div>
{{/ratings_present}}


<div id="accordion">
    <form class="col-lg-6 col-sm-12" action="" method="post" >
        <div class="card-body">
            <div class="ml-3">
                <h2 class="mt-3 mb-3">Have you a direct chair agreement for your thesis?</h2>
                <div class="form-row mt-3">
                    <div class="col-sm-6 col-xs-12 mb-3">
                        <label for="chair_select">Chair:</label>
                        <select id="chair_select" name="chair_select" class="form-control">
                            {{#chair}}
                                <option value="{{id}}" {{active_selection}}>{{chair_name}}</option>
                            {{/chair}}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <div class="card-body mt-2">
            <div class="ml-3">
                <h2 class="mb-3">Please provide your ratings.</h2>
                {{#rating}}
                    <div class="form-row mt-3 mb-3">
                        <div class="col-sm-6 col-xs-12 mb-3">
                            <label for="rating_select_{{index}}">Priority {{index}}:</label>
                            <select id="rating_select_{{index}}" name="rating_select_{{index}}" class="form-control {{is_invalid}}">
                                {{#option}}
                                    <option value="{{chair_id}}" {{selected}}>{{chair_name}}</option>
                                {{/option}}
                            </select>
                        </div>
                    </div>
                {{/rating}}

                <button type="submit" name ="save_ratings" class="btn btn-success btn-lg mt-3">SUBMIT</button>
            </div>
        </div>
    </form>
</div>


