{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template mod_stalloc/allocation

    Display the home site of this plugin.
    Classes required for JS:
    * none
    Data attributes required for JS:
    * none
    Context variables required for this template:
    * none
}}

{{#error_declaration_not_accepted}}
    <div class="alert alert-danger mb-5" role="alert">
        Warning! The Declaration was not Accepted! In order to proceed, you have to accept the declaration.
    </div>
{{/error_declaration_not_accepted}}

<div id="accordion">

    {{#allocation_can_start}}
        <div class="card-body">
            <div class="ml-3">
                <form class="col-lg-6 col-sm-12" action="" method="post" >
                    <h2 class="mt-3 mb-3">Start the allocation process?</h2>
                    <p class="lead">Number of Students to allocate: {{rated_student_count}}</p>
                    <button type="submit" name ="start_allocation" class="btn btn-success">START!</button>

                </form>
            </div>
        </div>
    {{/allocation_can_start}}

    {{#allocation_time_over}}
        <div class="jumbotron mt-5">
            <h1 class="display-4">The Allocation Time Phase is over</h1>
            <p class="lead">You can no longer allocate the students at this point!</p>
            <hr class="my-4">
            <p>

            </p>
        </div>
    {{/allocation_time_over}}

    {{#allocation_time_not_started}}
        <div class="jumbotron mt-5">
            <h1 class="display-4">The Allocation Time Phase has not started yet.</h1>
            <p class="lead">You can currently not allocate the students! Please wait for the Allocation Phase to start.</p>
            <hr class="my-4">
            <p>

            </p>
        </div>
    {{/allocation_time_not_started}}

    {{#no_ratings}}
        <div class="jumbotron mt-5">
            <h1 class="display-4">No Student Ratings</h1>
            <p class="lead">Allocation process cannot be started</p>
            <hr class="my-4">
            <p>
                There are currently no student ratings, which means there is noting to allocate for now.<br>
                Please wait until your students have submitted their ratings.
            </p>
        </div>
    {{/no_ratings}}

    {{#allocations}}
        <div class="card-body">
            <div class="ml-3">
                <h2 class="mt-3 mb-3">Allocation</h2>
                <div class="table-responsive">
                    <table class="table table-striped border mb-0">
                        <thead class="bg-light">
                        <tr>
                            {{#rating}}
                                <th scope="col">Priority: {{priority}}</th>
                            {{/rating}}
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            {{#rating}}
                               <td>{{count}}</td>
                            {{/rating}}
                        </tr>
                        </tbody>
                    </table>
                </div>
                <h3 class="mt-5 mb-3">Not Allocated: {{unallocated}} </h3>
            </div>
        </div>
    {{/allocations}}

</div>